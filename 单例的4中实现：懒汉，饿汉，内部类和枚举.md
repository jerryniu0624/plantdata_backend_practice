# 单例的4中实现：懒汉，饿汉，内部类和枚举



- ## 单例模式

  单例模式（Singleton Pattern）是 Java 中最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。

  这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。

  注意：

  1、单例类只能有一个实例。
  2、单例类必须自己创建自己的唯一实例。
  3、单例类必须给所有其他对象提供这一实例。

  ### 介绍

  #### 意图：

  保证一个类仅有一个实例，并提供一个访问它的全局访问点。

  

  #### 主要解决：

  一个全局使用的类频繁地创建与销毁。

  

  #### 何时使用：

  当您想控制实例数目，节省系统资源的时候。

  

  #### 如何解决：

  判断系统是否已经有这个单例，如果有则返回，如果没有则创建。

  

  #### 关键代码：

  构造函数是私有的。

  

  #### 应用实例：

  1、一个党只能有一个书记。 

  2、Windows 是多进程多线程的，在操作一个文件的时候，就不可避免地出现多个进程或线程同时操作一个文件的现象，所以所有文件的处理必须通过唯一的实例来进行。 

  3、一些设备管理器常常设计为单例模式，比如一个电脑有两台打印机，在输出的时候就要处理不能两台打印机打印同一个文件。

  

  #### 优点：

   1、在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例（比如管理学院首页页面缓存）。

   2、避免对资源的多重占用（比如写文件操作）。

  

  #### 缺点：

  没有接口，不能继承，与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。

  使用场景：

   1、要求生产唯一序列号。 

  2、WEB 中的计数器，不用每次刷新都在数据库里加一次，用单例先缓存起来。 

  3、创建的一个对象需要消耗的资源过多，比如 I/O 与数据库的连接等。

  注意事项：getInstance() 方法中需要使用同步锁 synchronized (Singleton.class) 防止多线程同时进入造成 instance 被多次实例化。

  

  ### 为什么要用单例模式？

  
          

  ```java
  public class Printer {
      private static Printer printer =null;//创建一个私有的全局变量
      /*
       * 如果有多线程并发访问时，上锁，让其排队等候，一次只能一人用。
       */
      public static synchronized Printer getPrinter(){
          if(printer==null){//如果为空，创建本实例
              printer = new Printer();
          }
          return printer;
      }
      /*
       * 构造私有化，保证在系统的使用中，只有一个实例
       */
      private Printer(){
  }
  }
  ```

  从代码上来分析，单例模式，首先向外提供了一个可被访问的实例化的对象，如果没有此对象时，该printer类创建一个。如果遇到多线程并发访问，加上关键字Synchronized，上锁让没有持有该对象的类处于等待状态。当前持有该printer的线程任务结束之后，处于等待中的线程才能逐个去持有该实例，去操作其方法。这样的一个过程 在编程中被称为单例模式。
  如果在系统中不使用单例模式的话，在碰到多线程访问的时候，printer就会给要请求的类，分别在内存中new出一个printer对象，让这些请求的类去做print方法。这样大量占有内存，就会导致系统运行变慢，像电脑的CPU一样，占有量极高，电脑卡死不动的感觉。因为系统的硬件设施需求变动量小，所以只能想出一个节约成本 的方法就是，单例模式，让多线程处于等待的状态，一个 一个的去解决，这样，即节约内存，提交了运行的成本。也就是单例存在的意义。
  ————————————————
  版权声明：本文为CSDN博主「Fuzz_」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
  原文链接：https://blog.csdn.net/qq_36186690/article/details/82945836





## 三、四种方法

https://blog.csdn.net/yeyazhishang/article/details/90445330?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162730593616780265455113%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=162730593616780265455113&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-90445330.first_rank_v2_pc_rank_v29&utm_term=%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E6%87%92%E6%B1%89%E5%92%8C%E9%A5%BF%E6%B1%89&spm=1018.2226.3001.4187



